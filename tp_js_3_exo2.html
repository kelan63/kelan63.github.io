<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Let's move</title>
    
    <script>
        
        var c;
        var ctx;
        var xhttp = new XMLHttpRequest();    
        var x;
        var y;
        var compteur;    
        
        function init() {       
            c = document.getElementById("myCanvas");
            ctx = c.getContext("2d");
            compteur = 0;
            setInterval(request,100);
                            
        }
        
        async function request(){
            let doc = await fetch("https://stwom.herokuapp.com/"+compteur);
            let coord = await doc.text();
            coordonnees(coord);
            dessin(x,y);
        }

        function coordonnees(pJsonString){
            var jsonObjet = eval('('+pJsonString+')');
            x = jsonObjet.x;
            y = jsonObjet.y;
        }

        function dessin(x,y){
            ctx.beginPath();
		    ctx.arc((x*5)+10,(y*5)+10,5,0,2*Math.PI,false);
		    ctx.fillStyle = "black";
		    ctx.stroke();
            compteur += 1;

        }
        
        


    </script>
    </head>
    <body onload='init()'>
        
        <canvas id="myCanvas" width="1500" height="700" style="border:1px solid #000000;"></canvas>        

    </body>
</html>
