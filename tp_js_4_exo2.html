<!DOCTYPE html>
<html>
<head>
    <SCRIPT LANGUAGE="Javascript" SRC="point_worker2.js"></SCRIPT>
    <script>

        var c;
        var ctx;    
        var w = new Array();
        var color = new Array("#ff0000","#00ff00","#0000ff","000000","123456");

        function init() {
            c = document.getElementById("myCanvas");
            ctx = c.getContext("2d");
            if (typeof(Worker) !== "undefined") {
                for (let i = 0; i < color.length; i++) { 
                    if (typeof(w[i]) == "undefined") {
                        console.log("couleur i ="+ color[i]);
                        w[i] = new Worker("point_worker2.js");
                        w[i].postMessage(color[i]);
                    }
                    w[i].onmessage = function(event) {
                        dessin(event.data[0],event.data[1],event.data[2]);
                    };
                }
            }
        }

        function dessin(x,y,color){
                    ctx.beginPath();
                    ctx.arc(x,y,5,0,2*Math.PI,false);
                    ctx.fillStyle = color;
                    ctx.stroke();
        }


    </script>
</head>
<body onload='init()'>
        
        <canvas id="myCanvas" width="1500" height="700" style="border:1px solid #000000;"></canvas>   
</body>
</html> 